{% extends 'TerrificCoreBundle::base.html.twig' %}

{% block css_default %}
    {% stylesheets
        'bundles/terrificcomposition/css/default.css'
        'bundles/terrificcomposition/css/elements.less'
        'bundles/terrificcomposition/css/solarized.less'
        filter="cssrewrite"
        output="css/compiled/default.css"
    %}
        <link rel="stylesheet" href="{{ asset_url }}" />
    {% endstylesheets %}
{% endblock %}

{% block js_default %}
<script type="text/javascript">
    /* <![CDATA[ */
    (function() {
        var s = document.createElement('script'), t = document.getElementsByTagName('script')[0];
        s.type = 'text/javascript';
        s.async = true;
        s.src = 'http://api.flattr.com/js/0.6/load.js?mode=auto';
        t.parentNode.insertBefore(s, t);
    })();
    /* ]]> */</script>
{% endblock %}

{# content that is the same on every page (ie. logo) goes into composition #}
{% block composition %}
{{ tc.module('Navigation', 'Navigation:main') }}
{# your page content goes into body #}
{% block body %}
{% endblock %}
{% endblock %}

{# terrificjs bootstrap #}
{% block bootstrap %}
    <script type="text/javascript">
        (function($) {
            $(document).ready(function() {
                var $page = $('body'),
                    config = {
                        dependencyPath: {
                            library: '{{app.request.basepath}}/bundles/terrificcomposition/js/dependencies/libraries/',
                            plugin: '{{app.request.basepath}}/bundles/terrificcomposition/js/dependencies/plugins/',
                            util: '{{app.request.basepath}}/bundles/terrificcomposition/js/dependencies/utils/'
                        }
                    },
                    application = new Tc.Application($page, config);

                application.registerModules();
                application.start();
            });
        })(Tc.$);
    </script>
{% endblock %}
